\section{Hierarchical hypergraphs}

\begin{definition}[Implementation]
    For two circuit signatures \(\Sigma = (
        \circuitsignaturevalues,
        \disconnected,
        \shortcircuit,
        \circuitsignaturegates,
        \circuitsignaturearity,
        \circuitsignaturecoarity
    )\) and \(\Sigma^\prime = (
        \circuitsignaturevalues^\prime,
        \disconnected^\prime,
        \shortcircuit^\prime,
        \circuitsignaturegates^\prime,
        {\circuitsignaturearity}^\prime,
        {\circuitsignaturecoarity}^\prime
    )\), an \emph{implementation specification} of \(\scirc{\Sigma^\prime}\) in
    \(\scircsigma\)
    is a pair \((V,P)\) where \(
        \morph{I_V}{\circuitsignaturevalues^\prime}{\circuitsignaturevalues^\star}
    \) is a \emph{value implementation} and \(
        \morph{I_P}{\circuitsignaturegates^\prime}{\ccircsigma}
    \) is a \emph{primitive implementation}.
    An \emph{implementation of \((I_V, I_P)\)} is a prop morphism \(
        \morph{I}{\scirc{\Sigma^\prime}}{\scircsigma}
    \) defined as \(
        I\left(\iltikzfig{circuits/components/values/v}[v]\right)
        =
        \bigotimes_{w \in I_V(v)} \iltikzfig{circuits/components/values/v}[w]
    \), \(
        I\left(\iltikzfig{circuits/components/gates/gate}[g]\right)
        =
        I_P(g)
    \) and the identity otherwise.
\end{definition}

We now formalise some of the `syntactic sugar' used
in~\cite{ghica2022compositional}.

\begin{definition}
    For a circuit signature \(\Sigma\), let \(\ccirc{\Sigma^+}\) be defined as
    the category with the generators of \(\ccircsigma\) augmented with \(
        \iltikzfig{strings/structure/monoid/init}[comb][n]
    \), \(
        \iltikzfig{strings/structure/comonoid/copy}[comb][n]
    \), \(
        \iltikzfig{strings/structure/monoid/merge}[comb][n]
    \) and \(
        \iltikzfig{strings/structure/comonoid/discard}[comb][n]
    \), and let \(\scirc{\Sigma^+}\) be defined as the category with the generators of
    \(\ccirc{\Sigma^+}\) along with, for all \(n \in \nat\) and \(n\)-tuples
    \(\overline{v} \in \circuitsignaturevalues^\star\), the generators \(
        \iltikzfig{circuits/components/waveforms/delay}[n]
    \), \(
        \iltikzfig{circuits/components/values/vs}[v][n]
    \) and \(
        \iltikzfig{circuits/components/waveforms/register-shorthand}[\overline{v}][n]
    \).
\end{definition}